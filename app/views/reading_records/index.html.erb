<h1 class="text-center">My Records</h1>
<div id="books" class="text-center mx-auto w-100">

  <ul class="nav mb-3 d-flex justify-content-center text-center" id="pills-tab" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="active btn btn-sm btn-outline-light mx-2" id="pills-home-tab" data-bs-toggle="pill" data-bs-target="#methodA" type="button" role="tab" aria-controls="pills-home" aria-selected="true">Read</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="btn btn-sm btn-outline-light mx-2" data-bs-toggle="pill" data-bs-target="#methodB" type="button" role="tab" aria-controls="pills-contact" aria-selected="false">Reading</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="btn btn-sm btn-outline-light mx-2" data-bs-toggle="pill" data-bs-target="#methodC" type="button" role="tab" aria-controls="pills-contact" aria-selected="false">Plan to read</button>
    </li>
  </ul>

  <div class="tab-content" id="pills-tabContent">

    <div class="tab-pane fade show active" id="methodA" role="tabpanel" aria-labelledby="pills-home-tab">

      <% if @read.length > 0 %>
        <table class="table text-light table-active">
          <thead>
          <tr>
            <th scope="col">Book</th>
            <th scope="col">Author</th>
            <th scope="col">Status</th>
            <th scope="col">Finished at</th>
          </tr>
          </thead>
          <tbody>
          <% @read.each do |rec| %>
            <tr class="text-light">
              <td><%= link_to "#{rec.book.title}", rec.book, class:"text-light text-decoration-none" %></td>
              <td><%= link_to "#{rec.book.author.first_name} #{rec.book.author.last_name}", rec.book.author, class:"text-light"  %></td>
              <td><%= rec.status.titleize %></td>
              <td>
                <% if rec.finished_reading_at %>
                  <%= rec.finished_reading_at.strftime('%d. %m. %Y') %>
                <% else %>
                  -
                <% end %>
              </td>

            </tr>
          <% end %>

          </tbody>
        </table>
      <% end %>

      <%= page_entries_info @read %>
      <%= paginate @read, theme: 'bootstrap-5', pagination_class: "my-3 pagination-sm flex-wrap justify-content-center" %>

    </div>

    <div class="tab-pane fade" id="methodB" role="tabpanel" aria-labelledby="pills-home-tab">

      <% if @reading.length > 0 %>
        <table class="table text-light table-active">
          <thead>
          <tr>
            <th scope="col">Book</th>
            <th scope="col">Author</th>
            <th scope="col">Status</th>
            <th scope="col">Finished at</th>
          </tr>
          </thead>
          <tbody>
          <% @reading.each do |rec| %>
            <tr class="text-light">
              <td><%= link_to "#{rec.book.title}", rec.book, class:"text-light text-decoration-none" %></td>
              <td><%= link_to "#{rec.book.author.first_name} #{rec.book.author.last_name}", rec.book.author, class:"text-light"  %></td>
              <td><%= rec.status.titleize %></td>
              <td>
                <% if rec.finished_reading_at %>
                  <%= rec.finished_reading_at.strftime('%d. %m. %Y') %>
                <% else %>
                  -
                <% end %>
              </td>

            </tr>
          <% end %>

          </tbody>
        </table>
      <% end %>

      <%= page_entries_info @reading %>
      <%= paginate @reading, theme: 'bootstrap-5', pagination_class: "my-3 pagination-sm flex-wrap justify-content-center" %>

    </div>

    <div class="tab-pane fade" id="methodC" role="tabpanel" aria-labelledby="pills-home-tab">

      <% if @plan_to_read.length > 0 %>
        <table class="table text-light table-active">
          <thead>
          <tr>
            <th scope="col">Book</th>
            <th scope="col">Author</th>
            <th scope="col">Status</th>
            <th scope="col">Finished at</th>
          </tr>
          </thead>
          <tbody>
          <% @plan_to_read.each do |rec| %>
            <tr class="text-light">
              <td><%= link_to "#{rec.book.title}", rec.book, class:"text-light text-decoration-none" %></td>
              <td><%= link_to "#{rec.book.author.first_name} #{rec.book.author.last_name}", rec.book.author, class:"text-light"  %></td>
              <td><%= rec.status.titleize %></td>
              <td>
                <% if rec.finished_reading_at %>
                  <%= rec.finished_reading_at.strftime('%d. %m. %Y') %>
                <% else %>
                  -
                <% end %>
              </td>

            </tr>
          <% end %>

          </tbody>
        </table>
      <% end %>

      <%= page_entries_info @plan_to_read %>
      <%= paginate @plan_to_read, theme: 'bootstrap-5', pagination_class: "my-3 pagination-sm flex-wrap justify-content-center" %>

    </div>
  </div>

  <div>
    <hr>
    <p><b><%= @read.length %></b> books read, <b><%= @reading.length %></b> reading, <b><%= @plan_to_read.length %></b> planning to read.</p>
  </div>

  <div class="d-flex justify-content-start">
    <%= link_to "New record", new_reading_record_path, class:"btn btn-outline-light" %>
  </div>
</div>